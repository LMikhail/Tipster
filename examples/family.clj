(ns family
  (:require [tipster.core :as tipster]))

(defn description
  "–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–∞"
  []
  {:title "üë®‚Äçüë©‚Äçüëß‚Äçüë¶ –ü—Ä–∏–º–µ—Ä 2: –°–µ–º–µ–π–Ω—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è"
   :subtitle "–ò–∑—É—á–∞–µ–º —Å–≤—è–∑–∏ –º–µ–∂–¥—É –¥–∞–Ω–Ω—ã–º–∏"
   :what-you-learn ["–°–æ–∑–¥–∞–Ω–∏–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Ñ–∞–∫—Ç–æ–≤"
                    "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–∞–≤–Ω—ã—Ö –ø—Ä–µ–¥–∏–∫–∞—Ç–æ–≤"
                    "–ó–∞–ø—Ä–æ—Å—ã —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏"
                    "–ú–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏–π"]
   :next "./scripts/run-example.sh rules"})

(defn run-example
  "–ó–∞–ø—É—Å–∫ –ø—Ä–∏–º–µ—Ä–∞ —Å–µ–º–µ–π–Ω—ã—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏–π"
  []
  (println "\nüîπ –ü—Ä–∏–º–µ—Ä 2: –°–µ–º–µ–π–Ω—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è")
  (println (apply str (repeat 50 "=")))
  
  (tipster/reset-tipster!)
  
  ;; –§–∞–∫—Ç—ã –æ —Å–µ–º—å–µ
  (tipster/deffact (—Ä–æ–¥–∏—Ç–µ–ª—å –∞–ª–∏—Å–∞ –±–æ–±))
  (tipster/deffact (—Ä–æ–¥–∏—Ç–µ–ª—å –±–æ–± —á–∞—Ä–ª–∏))
  (tipster/deffact (—Ä–æ–¥–∏—Ç–µ–ª—å –±–æ–± –¥—ç–≤–∏–¥))
  (tipster/deffact (—Ä–æ–¥–∏—Ç–µ–ª—å —á–∞—Ä–ª–∏ –µ–≤–∞))
  
  ;; –§–∞–∫—Ç—ã –æ –ø–æ–ª–µ
  (tipster/deffact (–º—É–∂—á–∏–Ω–∞ –±–æ–±))
  (tipster/deffact (–º—É–∂—á–∏–Ω–∞ —á–∞—Ä–ª–∏))
  (tipster/deffact (–º—É–∂—á–∏–Ω–∞ –¥—ç–≤–∏–¥))
  (tipster/deffact (–∂–µ–Ω—â–∏–Ω–∞ –∞–ª–∏—Å–∞))
  (tipster/deffact (–∂–µ–Ω—â–∏–Ω–∞ –µ–≤–∞))
  
  (println "\nüìù –î–æ–±–∞–≤–∏–ª–∏ —Ñ–∞–∫—Ç—ã –æ —Å–µ–º—å–µ:")
  (println "   (—Ä–æ–¥–∏—Ç–µ–ª—å –∞–ª–∏—Å–∞ –±–æ–±)")
  (println "   (—Ä–æ–¥–∏—Ç–µ–ª—å –±–æ–± —á–∞—Ä–ª–∏)")
  (println "   (—Ä–æ–¥–∏—Ç–µ–ª—å –±–æ–± –¥—ç–≤–∏–¥)")
  (println "   (—Ä–æ–¥–∏—Ç–µ–ª—å —á–∞—Ä–ª–∏ –µ–≤–∞)")
  (println "   + —Ñ–∞–∫—Ç—ã –æ –ø–æ–ª–µ")
  
  (println "\n‚ùì –ó–∞–ø—Ä–æ—Å: –ö—Ç–æ —á–µ–π —Ä–æ–¥–∏—Ç–µ–ª—å?")
  (println "   query: (—Ä–æ–¥–∏—Ç–µ–ª—å ?X ?Y)")
  (doseq [result (tipster/query (—Ä–æ–¥–∏—Ç–µ–ª—å ?X ?Y))]
    (println "   ‚úì " result))
  
  (println "\n‚ùì –ó–∞–ø—Ä–æ—Å: –ö—Ç–æ –º—É–∂—á–∏–Ω–∞?")
  (println "   query: (–º—É–∂—á–∏–Ω–∞ ?X)")
  (doseq [result (tipster/query (–º—É–∂—á–∏–Ω–∞ ?X))]
    (println "   ‚úì " result))) 
